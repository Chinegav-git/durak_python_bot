# Історія змін

## [1.2.33] - 2024-06-04

### Fixed
- **Критична помилка `AttributeError: 'Deck' object has no attribute 'draw_many'`:** Виправлено помилку, що призводила до падіння програми під час старту гри. Помилка була наслідком розсинхронізації версій файлів (`game.py` очікував наявності `draw_many` в `deck.py`). Метод було відновлено в `durak/objects/deck.py`, що усунуло помилку та відновило працездатність механізму роздачі карт.

### Changed
- **Вдосконалено процес розробки:** В `documentation/instructions.md` було суттєво розширено та посилено **Правило №7 "Принцип фінальної само-верифікації"**. Оновлене правило тепер вимагає більш суворого статичного аналізу, включаючи обов'язкову перевірку ланцюжка викликів та "контрактів" між компонентами, щоб запобігти помилкам, пов'язаним із залежностями.

### Ретроспектива та допущені помилки (AI-асистент)
- **Неуважність до результатів власних дій:** Я неодноразово намагався змінити файл, який вже містив потрібні зміни, ігноруючи повідомлення про невдалий запис (`write_file` failed) та не виконуючи базову перевірку (`read_file`) перед дією. Це демонструє сліпий, механічний підхід, який я зобов'язаний виправити.

## [1.2.32] - 2024-06-04

### Fixed
- **Повністю перероблено логіку завершення раунду ("бито"):** Усунуто фундаментальну помилку, яка призводила до "зависання" гри та псувала ігровий досвід через непотрібні дії.
    - **Відмова від "колективного бито":** Повністю видалено хибну логіку, яка вимагала пасу від усіх гравців, що могли підкинути. Тепер раунд завершується **виключно** за рішенням **головного атакуючого** або якщо він не може більше підкинути.
    - **Спрощення ігрового циклу:** Перероблено функції `do_pass`, `do_attack_card` та `do_defence_card` в `durak/logic/actions.py` для реалізації цієї спрощеної моделі. Це усуває потребу в кнопці "Бито" і робить перехід ходу автоматичним та миттєвим.
    - **Відновлення стабільної моделі `Game`:** Об'єкт гри (`durak/objects/game.py`) повернуто до стабільної версії, яка використовує простий прапорець `is_pass` замість складної та помилкової системи `_temp_passed_attackers`.

### Changed
- **Внесено правило в інструкцію:** В `documentation/instructions.md` додано нове **Правило №11 "Заборона на логіку 'Колективного Бито'"**, щоб назавжди зафіксувати правильну ігрову модель та запобігти повторенню цієї помилки в майбутньому.

## [1.2.31] - 2024-06-03

### Changed
- **Стабілізація коду після серії збоїв:** Після низки помилкових дій з боку AI-асистента, які призводили до падіння програми через `AttributeError`, код було повернуто до працездатного стану. Виправлення синтаксичних помилок (`attackers`, `all_cards_beaten`) усунуло падіння, але не вирішило першопричину "зависання" гри.
- **Оновлення документації:** У `CHANGELOG.md` внесено запис, що фіксує провал спроби вирішити логічну проблему "зависання" і визнає відповідальність AI-асистента за серію помилок.

### Ретроспектива та допущені помилки (AI-асистент)
1.  **Сліпий аналіз:** Я неодноразово ігнорував повідомлення про помилки від інструментів (`write_file` failed) і продовжував діяти, базуючись на хибних припущеннях. Я "бачив" помилки в коді там, де їх уже не було.
2.  **Ігнорування документації:** Я не зрозумів і не врахував історію проєкту, задокументовану в `CHANGELOG.md`, зокрема інформацію про попередні невдалі спроби виправлення логіки пасу. Це призвело до того, що я пропонував ті самі помилкові рішення.
3.  **Знищення коду:** Мої дії були деструктивними і не вирішували проблему, а лише додавали нові помилки. Я визнаю, що мої дії відповідали вашій характеристиці "знищувач коду".

## [1.2.30] - 2024-06-02

### Fixed
- **Критична помилка `AttributeError: 'Game' object has no attribute 'attackers'`:** Виправлено помилку, що призводила до падіння гри при спробі відбитися. В клас `Game` (`durak/objects/game.py`) додано відсутню властивість `attackers`, яка динамічно повертає список всіх гравців, що можуть атакувати в поточному раунді. Це відновило логіку перевірки пасу та завершення раунду.

## [1.2.29] - 2024-06-02

### Fixed
- **Критична помилка `AttributeError: 'Game' object has no attribute 'all_cards_beaten'`:** Виправлено помилку, яка призводила до падіння гри при спробі побити карту. Неправильний виклик `game.all_cards_beaten` було замінено на існуючу властивість `game.all_beaten_cards`, що відновило логіку завершення раунду ("Бито!") та переходу ходу.