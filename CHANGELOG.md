# Історія змін

## [1.2.39] - 2024-06-09

### Fix
- Вирішено критичну помилку, через яку гравці не могли приєднатися до нової гри після перезавантаження сервера ("застрягання у грі").
- Статус гравця (`is_playing`) перенесено з тимчасової пам'яті до бази даних для надійного зберігання.

### Refactor
- Централізовано логіку завершення гри та оновлення статусів гравців у `GameManager`.
- Видалено застарілі та ненадійні функції `player_for_user` та `check_user_ex_in_all_games` з глобального менеджера.
- Оновлено всі команди, пов'язані з виходом з гри (`/leave`, `/goleave`, `/kick`, автоматичний вихід), для роботи з новою системою стану гравців.

## [1.2.38] - 2024-06-08

### Changed
- **Уніфіковано ігрові кнопки:** Забезпечено однаковий досвід користувача, використовуючи єдину інлайн-клавіатуру (`CHOISE`) під усіма ключовими повідомленнями, що керують ходом гри: "Початок раунду", "Перехід ходу" та "Хід залишається". Це усунуло непослідовність і спростило логіку в `durak/handlers/game/process_chosen.py` шляхом видалення старого повідомлення та надсилання нового з уніфікованою кнопкою.

## [1.2.37] - 2024-06-07

### Fixed
- **Критична помилка `ModuleNotFoundError`:** Виправлено помилку `ModuleNotFoundError: No module named 'durak.logic.exceptions'`, яка виникала при запуску бота. Помилка була спричинена неправильним імпортом `NoGameInChatError` у файлі `durak/handlers/game/`

## [1.2.32] - 2024-06-04

### Fixed
- **Повністю перероблено логіку завершення раунду ("бито"):** Усунуто фундаментальну помилку, яка призводила до "зависання" гри та псувала ігровий досвід через непотрібні дії.
    - **Відмова від "колективного бито":** Повністю видалено хибну логіку, яка вимагала пасу від усіх гравців, що могли підкинути. Тепер раунд завершується **виключно** за рішенням **головного атакуючого** або якщо він не може більше підкинути.
    - **Спрощення ігрового циклу:** Перероблено функції `do_pass`, `do_attack_card` та `do_defence_card` в `durak/logic/actions.py` для реалізації цієї спрощеної моделі. Це усуває потребу в кнопці "Бито" і робить перехід ходу автоматичним та миттєвим.
    - **Відновлення стабільної моделі `Game`:** Об'єкт гри (`durak/objects/game.py`) повернуто до стабільної версії, яка використовує простий прапорець `is_pass` замість складної та помилкової системи `_temp_passed_attackers`.
